#!/bin/bash
RED='\033[1;91m'
RESET='\033[0m'
CLEAR_LINE='\033[2K'
DELAY=0.1

banner=(
"  ██████ ▄▄▄█████▓ ██▀███  ▓█████   ██████   ██████ "
"▒██    ▒ ▓  ██▒ ▓▒▓██ ▒ ██▒▓█   ▀ ▒██    ▒ ▒██    ▒ "
"░ ▓██▄   ▒ ▓██░ ▒░▓██ ░▄█ ▒▒███   ░ ▓██▄   ░ ▓██▄   "
"  ▒   ██▒░ ▓██▓ ░ ▒██▀▀█▄  ▒▓█  ▄   ▒   ██▒  ▒   ██▒"
"▒██████▒▒  ▒██▒ ░ ░██▓ ▒██▒░▒████▒▒██████▒▒▒██████▒▒"
"▒ ▒▓▒ ▒ ░  ▒ ░░   ░ ▒▓ ░▒▓░░░ ▒░ ░▒ ▒▓▒ ▒ ░▒ ▒▓▒ ▒ ░"
"░ ░▒  ░ ░    ░      ░▒ ░ ▒░ ░ ░  ░░ ░▒  ░ ░░ ░▒  ░ ░"
"░  ░  ░    ░        ░░   ░    ░   ░  ░  ░  ░  ░  ░  "
"      ░              ░        ░  ░      ░        ░  "
)

print_banner() {
  clear
  for line in "${banner[@]}"; do
    echo -e "$line"
  done
}

print_drips() {
  # Размер баннера в строках и символах
  local rows=${#banner[@]}
  local cols=${#banner[0]}

  # Массив капель: для каждого столбца, где есть буква, по очереди рисуем красные 'капли' вниз
  for drip_line in {1..6}; do
    # Сдвигаем курсор вверх на rows, чтобы перерисовать "капли"
    tput cuu $rows

    for ((i=0; i<rows; i++)); do
      line=""
      for ((j=0; j<cols; j++)); do
        char="${banner[i]:j:1}"
        # Если в этой колонке есть символ (не пробел) и это строка, где капля должна идти
        if [[ "$char" != " " ]]; then
          # Если текущая строка - последняя или ниже где капля, рисуем красную каплю
          if (( i + drip_line >= rows )); then
            line+="${RED}░${RESET}"
          else
            line+="${char}"
          fi
        else
          # пробелы просто пробелы
          line+=" "
        fi
      done
      echo -e "$line"
    done
    sleep $DELAY
  done
}

print_banner
print_drips
